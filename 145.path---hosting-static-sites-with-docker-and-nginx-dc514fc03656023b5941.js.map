{"version":3,"sources":["webpack:///145.path---hosting-static-sites-with-docker-and-nginx-dc514fc03656023b5941.js","webpack:///../.gatsby-intermediate-build/json/1354301858.json"],"names":["webpackJsonp","280","module","exports","data","config","siteMetadata","title","author","markdown","id","bodyHTML","frontmatter","readNext","path","excerpt","tags","date","pathContext","component"],"mappings":"AAAAA,cAAc,MAERC,IACA,SAASC,EAAQC,GCHvBD,EAAAC,SACAC,MACAC,QACAC,cACAC,MAAA,YACAC,OAAA,iBAGAC,UACAC,GAAA,0GACAC,SAAA,soLACAC,aACAC,UACAC,KAAA,4BACAC,QAAA,0MACAH,aACAL,MAAA,4BAGAA,MAAA,6CACAS,MACA,SACA,cACA,UACA,WAEAC,KAAA,oBAIAC,aACAJ,KAAA,+CACAK,UAAA","file":"145.path---hosting-static-sites-with-docker-and-nginx-dc514fc03656023b5941.js","sourcesContent":["webpackJsonp([145],{\n\n/***/ 280:\n/***/ function(module, exports) {\n\n\tmodule.exports = {\n\t\t\"data\": {\n\t\t\t\"config\": {\n\t\t\t\t\"siteMetadata\": {\n\t\t\t\t\t\"title\": \"Bricolage\",\n\t\t\t\t\t\"author\": \"Kyle Mathews\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"markdown\": {\n\t\t\t\t\"id\": \"/Users/kylemathews/programs/blog/pages/2014-04-18---hosting-static-sites-with-docker-and-nginx/index.md\",\n\t\t\t\t\"bodyHTML\": \"<p>For most of its life, this blog has run on Drupal. But as I no longer do Drupal\\ndevelopment, maintaining (and even using) Drupal feels like more and more of a burden.\\nSo like the other <a href=\\\"https://twitter.com/paulg/status/402205795552489472\\\">cool kids on the internet</a>\\nI decided to convert my site to a static website. Easy to host, zero security updates, and completely customizable.</p>\\n<p>I evaluated quite a few of the <a href=\\\"http://staticgen.com/\\\">popular static site frameworks</a> out there e.g.\\n<a href=\\\"http://jekyllrb.com/\\\">Jekyll</a> and <a href=\\\"http://docpad.org/\\\">Docpad</a> but none of them\\nreally attracted me. It seemed the problem of generating an HTML site was small enough\\nthat with <a href=\\\"http://gulpjs.com\\\">GulpJS</a>, a number of <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/package.json\\\">NPM modules</a>,\\nand some glue code I could easily build my own static site generator.</p>\\n<p>And as hoped, building a custom static site generator turned out to be straightforward.\\nProps to GulpJS and the vast treasure-trove of Node.js modules in the <a href=\\\"https://www.npmjs.org/\\\">NPM repository</a>.\\nYou can see the meat of the logic for generating this site <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/gulpfile.coffee#L23-L78\\\">at the blog's repo</a>.</p>\\n<p>The next task was how to host the site. I briefly considered using Amazon S3, which is\\na very attractive option as it's very fast and essentially infinitely scalable, but decided against\\nit as I wanted a chance to play around with two other software tools, <a href=\\\"http://docker.io\\\">Docker</a> and <a href=\\\"http://nginx.org/\\\">Nginx</a>.</p>\\n<h2>Building applications with Docker</h2>\\n<p>Docker has really captured my and many other developers' imaginations. Its primary\\nattraction to me is the utter simplicity it enables in packaging and deploying server applications.\\nComing from years of writing complicated <a href=\\\"http://www.getchef.com/\\\">Chef</a> or <a href=\\\"http://www.ansible.com/home\\\">Ansible</a>\\nscripts, being able to bundle each applications' dependencies together is a breath of\\nfresh air. <a href=\\\"http://c2.com/cgi/wiki?GlobalVariablesAreBad\\\">Global variables (and packages) are bad</a>.\\nDocker lets you completely ignore the \\\"global state\\\" of the server that's running\\nyour application. It's truly a \\\"Write once, run anywhere\\\" system. If it works on\\nyour laptop, it'll work in production no matter where or what it's installed with.</p>\\n<p>This changes how you think about the boundaries of your application.\\nConsider my case of hosting this static website. Typically you'd think of this blog\\nas the collection of HTML, CSS, and images that make up the site.</p>\\n<p>What you think your application is affects how you deploy it. If your application is a bundle of files then\\n\\\"deploying\\\" means placing these files inside a software system that understands HTTP and can serve files, e.g. Apache or Nginx.</p>\\n<p>Compare this to how I'm using Docker for this blog. Instead of using a global Nginx instance\\nto serve my blog, I create a Docker image with Nginx <em>and</em> my blog's files. Which makes the resulting \\\"blog application\\\"\\nan atomic unit that I can build, test, and run anywhere as many times as I want.</p>\\n<p>This is a much more preferable outcome. Instead of a messy collection of files as my outcome,\\nwith Docker, I have a neat tidy Docker image. Now to to run a very high-performance blog, all I\\nneed to do is type <code>docker run blog</code> and off it goes.</p>\\n<p>This makes some fun and useful things quite easy. E.g. while writing this post, I was curious how well\\nmy blog would hold up under load testing. I didn't want to use the container running the live\\nversion of this blog for the testing as that would fill my access logs with useless entries.\\nSo instead, I ran an additional instance of my Docker blog image on the\\nsame server but listening on a different port. I used this twin\\nversion of my blog to do the load testing and threw it away once the testing was finished. Setting up\\na parallel version of this blog would be much more difficult with a global installation of Nginx.</p>\\n<h2>Docker layers</h2>\\n<p>Docker has an additional innovation which I love. Docker lets you create base images\\nwhich your application can build on. Since all static sites need about the same Nginx configuration,\\nI created a <a href=\\\"https://github.com/KyleAMathews/docker-nginx\\\">Nginx Docker image</a>\\nI can use (and anyone else) as a base whenever building a new static website.</p>\\n<p>By encapsulating the Nginx configuration in an image, the Dockerfile (Docker's DSL\\nfor defining image builds) <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/Dockerfile\\\">for this blog</a> is incredibly simple. Three lines in fact.</p>\\n<pre><code class=\\\"language-bash\\\">FROM kyma/docker-nginx\\nADD public/ /var/www\\nCMD 'nginx'\\n</code></pre>\\n<p>The first line tells Docker to use my Nginx image as the base, the second says to add\\nthe site's files within the image at /var/www, and the third says to run Nginx when\\na new container is started.</p>\\n<p>There's tons of similar base images available on the public Docker image index for building <a href=\\\"https://index.docker.io/search?q=ruby\\\">Ruby</a>,\\n<a href=\\\"https://index.docker.io/search?q=python\\\">Python</a>, <a href=\\\"https://index.docker.io/search?q=go\\\">Go</a>, etc. applications.\\nBut it's also trivial to create base images for your specific needs. For example, this is\\na <a href=\\\"https://github.com/KyleAMathews/docker-nodejs-base/blob/master/Dockerfile\\\">base image I wrote with the tools I commonly use to build web frontends</a>.\\nI've used it now for several side projects of mine.</p>\\n\",\n\t\t\t\t\"frontmatter\": {\n\t\t\t\t\t\"readNext\": {\n\t\t\t\t\t\t\"path\": \"/building-your-own-tools/\",\n\t\t\t\t\t\t\"excerpt\": \"I was explaining to someone in IRC earlier this week about why I was building my own project management software and said it was basically because managing my projects and tasks (or more abstractly,â€¦\",\n\t\t\t\t\t\t\"frontmatter\": {\n\t\t\t\t\t\t\t\"title\": \"Building your own tools\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"title\": \"Hosting static sites with Docker and Nginx\",\n\t\t\t\t\t\"tags\": [\n\t\t\t\t\t\t\"Docker\",\n\t\t\t\t\t\t\"Open Source\",\n\t\t\t\t\t\t\"node.js\",\n\t\t\t\t\t\t\"gulp.js\"\n\t\t\t\t\t],\n\t\t\t\t\t\"date\": \"April 24, 2014\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"pathContext\": {\n\t\t\t\"path\": \"/hosting-static-sites-with-docker-and-nginx/\",\n\t\t\t\"component\": \"/Users/kylemathews/programs/blog/pages/blog-post.js\"\n\t\t}\n\t};\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 145.path---hosting-static-sites-with-docker-and-nginx-dc514fc03656023b5941.js\n **/","module.exports = {\n\t\"data\": {\n\t\t\"config\": {\n\t\t\t\"siteMetadata\": {\n\t\t\t\t\"title\": \"Bricolage\",\n\t\t\t\t\"author\": \"Kyle Mathews\"\n\t\t\t}\n\t\t},\n\t\t\"markdown\": {\n\t\t\t\"id\": \"/Users/kylemathews/programs/blog/pages/2014-04-18---hosting-static-sites-with-docker-and-nginx/index.md\",\n\t\t\t\"bodyHTML\": \"<p>For most of its life, this blog has run on Drupal. But as I no longer do Drupal\\ndevelopment, maintaining (and even using) Drupal feels like more and more of a burden.\\nSo like the other <a href=\\\"https://twitter.com/paulg/status/402205795552489472\\\">cool kids on the internet</a>\\nI decided to convert my site to a static website. Easy to host, zero security updates, and completely customizable.</p>\\n<p>I evaluated quite a few of the <a href=\\\"http://staticgen.com/\\\">popular static site frameworks</a> out there e.g.\\n<a href=\\\"http://jekyllrb.com/\\\">Jekyll</a> and <a href=\\\"http://docpad.org/\\\">Docpad</a> but none of them\\nreally attracted me. It seemed the problem of generating an HTML site was small enough\\nthat with <a href=\\\"http://gulpjs.com\\\">GulpJS</a>, a number of <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/package.json\\\">NPM modules</a>,\\nand some glue code I could easily build my own static site generator.</p>\\n<p>And as hoped, building a custom static site generator turned out to be straightforward.\\nProps to GulpJS and the vast treasure-trove of Node.js modules in the <a href=\\\"https://www.npmjs.org/\\\">NPM repository</a>.\\nYou can see the meat of the logic for generating this site <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/gulpfile.coffee#L23-L78\\\">at the blog's repo</a>.</p>\\n<p>The next task was how to host the site. I briefly considered using Amazon S3, which is\\na very attractive option as it's very fast and essentially infinitely scalable, but decided against\\nit as I wanted a chance to play around with two other software tools, <a href=\\\"http://docker.io\\\">Docker</a> and <a href=\\\"http://nginx.org/\\\">Nginx</a>.</p>\\n<h2>Building applications with Docker</h2>\\n<p>Docker has really captured my and many other developers' imaginations. Its primary\\nattraction to me is the utter simplicity it enables in packaging and deploying server applications.\\nComing from years of writing complicated <a href=\\\"http://www.getchef.com/\\\">Chef</a> or <a href=\\\"http://www.ansible.com/home\\\">Ansible</a>\\nscripts, being able to bundle each applications' dependencies together is a breath of\\nfresh air. <a href=\\\"http://c2.com/cgi/wiki?GlobalVariablesAreBad\\\">Global variables (and packages) are bad</a>.\\nDocker lets you completely ignore the \\\"global state\\\" of the server that's running\\nyour application. It's truly a \\\"Write once, run anywhere\\\" system. If it works on\\nyour laptop, it'll work in production no matter where or what it's installed with.</p>\\n<p>This changes how you think about the boundaries of your application.\\nConsider my case of hosting this static website. Typically you'd think of this blog\\nas the collection of HTML, CSS, and images that make up the site.</p>\\n<p>What you think your application is affects how you deploy it. If your application is a bundle of files then\\n\\\"deploying\\\" means placing these files inside a software system that understands HTTP and can serve files, e.g. Apache or Nginx.</p>\\n<p>Compare this to how I'm using Docker for this blog. Instead of using a global Nginx instance\\nto serve my blog, I create a Docker image with Nginx <em>and</em> my blog's files. Which makes the resulting \\\"blog application\\\"\\nan atomic unit that I can build, test, and run anywhere as many times as I want.</p>\\n<p>This is a much more preferable outcome. Instead of a messy collection of files as my outcome,\\nwith Docker, I have a neat tidy Docker image. Now to to run a very high-performance blog, all I\\nneed to do is type <code>docker run blog</code> and off it goes.</p>\\n<p>This makes some fun and useful things quite easy. E.g. while writing this post, I was curious how well\\nmy blog would hold up under load testing. I didn't want to use the container running the live\\nversion of this blog for the testing as that would fill my access logs with useless entries.\\nSo instead, I ran an additional instance of my Docker blog image on the\\nsame server but listening on a different port. I used this twin\\nversion of my blog to do the load testing and threw it away once the testing was finished. Setting up\\na parallel version of this blog would be much more difficult with a global installation of Nginx.</p>\\n<h2>Docker layers</h2>\\n<p>Docker has an additional innovation which I love. Docker lets you create base images\\nwhich your application can build on. Since all static sites need about the same Nginx configuration,\\nI created a <a href=\\\"https://github.com/KyleAMathews/docker-nginx\\\">Nginx Docker image</a>\\nI can use (and anyone else) as a base whenever building a new static website.</p>\\n<p>By encapsulating the Nginx configuration in an image, the Dockerfile (Docker's DSL\\nfor defining image builds) <a href=\\\"https://github.com/KyleAMathews/blog/blob/master/Dockerfile\\\">for this blog</a> is incredibly simple. Three lines in fact.</p>\\n<pre><code class=\\\"language-bash\\\">FROM kyma/docker-nginx\\nADD public/ /var/www\\nCMD 'nginx'\\n</code></pre>\\n<p>The first line tells Docker to use my Nginx image as the base, the second says to add\\nthe site's files within the image at /var/www, and the third says to run Nginx when\\na new container is started.</p>\\n<p>There's tons of similar base images available on the public Docker image index for building <a href=\\\"https://index.docker.io/search?q=ruby\\\">Ruby</a>,\\n<a href=\\\"https://index.docker.io/search?q=python\\\">Python</a>, <a href=\\\"https://index.docker.io/search?q=go\\\">Go</a>, etc. applications.\\nBut it's also trivial to create base images for your specific needs. For example, this is\\na <a href=\\\"https://github.com/KyleAMathews/docker-nodejs-base/blob/master/Dockerfile\\\">base image I wrote with the tools I commonly use to build web frontends</a>.\\nI've used it now for several side projects of mine.</p>\\n\",\n\t\t\t\"frontmatter\": {\n\t\t\t\t\"readNext\": {\n\t\t\t\t\t\"path\": \"/building-your-own-tools/\",\n\t\t\t\t\t\"excerpt\": \"I was explaining to someone in IRC earlier this week about why I was building my own project management software and said it was basically because managing my projects and tasks (or more abstractly,â€¦\",\n\t\t\t\t\t\"frontmatter\": {\n\t\t\t\t\t\t\"title\": \"Building your own tools\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"title\": \"Hosting static sites with Docker and Nginx\",\n\t\t\t\t\"tags\": [\n\t\t\t\t\t\"Docker\",\n\t\t\t\t\t\"Open Source\",\n\t\t\t\t\t\"node.js\",\n\t\t\t\t\t\"gulp.js\"\n\t\t\t\t],\n\t\t\t\t\"date\": \"April 24, 2014\"\n\t\t\t}\n\t\t}\n\t},\n\t\"pathContext\": {\n\t\t\"path\": \"/hosting-static-sites-with-docker-and-nginx/\",\n\t\t\"component\": \"/Users/kylemathews/programs/blog/pages/blog-post.js\"\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../.gatsby-intermediate-build/json/1354301858.json\n ** module id = 280\n ** module chunks = 145\n **/"],"sourceRoot":""}